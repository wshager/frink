{"version":3,"sources":["../src/util.js"],"names":["id","a","toString","Object","prototype","isArray","Array","obj","call","isFunction","x","isObject","getPrototypeOf","isPromise","Promise","isNumber","isDOMNode","isNodeEnv","Node","isUntypedAtomic","constructor","name","isList","maybe","__is_List","isMap","__is_Map","isUndef","s","undefined","isNull","isUndefOrNull","DONE","done","regexAstralSymbols","ucs2length","string","counter","replace","length","value","charCodeAt","extra","range","n","arr","i","_isNode","isNode","global","process","e","camelCase","str","split","map","_","charAt","toUpperCase","substr","join"],"mappings":"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","sourcesContent":["// helpers\r\n\r\nexport const id = a => a;\r\n\r\nexport const toString = Object.prototype.toString;\r\n\r\nexport const isArray = typeof Array.isArray === \"function\" ? Array.isArray : function(obj) {\r\n\treturn toString.call(obj) == \"[object Array]\";\r\n};\r\n\r\nexport function isFunction(x) {\r\n\treturn typeof x === \"function\";\r\n}\r\n\r\nexport function isObject(x) {\r\n\treturn x instanceof Object &&\r\n\t\tObject.getPrototypeOf(x) === Object.getPrototypeOf({});\r\n}\r\n\r\nexport function isPromise(x) {\r\n\treturn !!x && x instanceof Promise;\r\n}\r\n\r\nexport function isNumber(x) {\r\n\treturn typeof x === \"number\";\r\n}\r\n\r\nexport function isDOMNode(x) {\r\n\treturn !isNodeEnv && x && x instanceof Node;\r\n}\r\n\r\nexport function isUntypedAtomic(x) {\r\n\treturn x instanceof Object && x.constructor.name == \"UntypedAtomic\";\r\n}\r\n\r\n\r\nexport function isList(maybe) {\r\n\treturn maybe && maybe.__is_List;\r\n}\r\n\r\n\r\nexport function isMap(maybe) {\r\n\treturn maybe && maybe.__is_Map;\r\n}\r\n\r\nexport const isUndef = s => s === undefined;\r\n\r\nexport const isNull = s => s === null;\r\n\r\nexport const isUndefOrNull = s => isUndef(s) || isNull(s);\r\n\r\nexport const DONE = {\r\n\tdone: true\r\n};\r\n\r\nconst regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n\r\nexport function ucs2length(string) {\r\n\tlet counter = 0;\r\n\tstring = string.replace(regexAstralSymbols,\"_\");\r\n\tconst length = string.length;\r\n\twhile (counter < length) {\r\n\t\tconst value = string.charCodeAt(counter++);\r\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n\t\t\t// It's a high surrogate, and there is a next character.\r\n\t\t\tconst extra = string.charCodeAt(counter);\r\n\t\t\tif ((extra & 0xFC00) == 0xDC00) counter++; // Low surrogate.\r\n\t\t}\r\n\t}\r\n\treturn counter;\r\n}\r\n\r\nexport function range(n) {\r\n\tvar arr = new Array(n);\r\n\tfor(var i=0; i<arr.length;) {\r\n\t\tarr[i] = ++i;\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nconst _isNode = () => {\r\n\tlet isNode = false;\r\n\ttry {\r\n\t\tisNode = Object.prototype.toString.call(global.process) === \"[object process]\";\r\n\t} catch(e) {\r\n\t\tisNode = false;\r\n\t}\r\n\treturn isNode;\r\n};\r\n// Only Node.JS has a process variable that is of [[Class]] process\r\nexport const isNodeEnv = _isNode();\r\n\r\nexport function camelCase(str) {\r\n\treturn str.split(/-/g).map((_,i) => i > 0 ? _.charAt(0).toUpperCase() + _.substr(1) : _).join(\"\");\r\n}\r\n"],"file":"util.js"}
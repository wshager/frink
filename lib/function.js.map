{"version":3,"sources":["../src/function.js"],"names":["modules","loadModule","moduleUri","require","functionLookup","qname","arity","uri","toString","name","split","pop","fn","apply","a","toJS"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA,MAAMA,UAAU;AACf,4CAAyC;AAD1B,CAAhB;;AAIO,SAASC,UAAT,CAAoBC,SAApB,EAA+B;AACrC;AACA;AACA;AACA,SAAO,cAAIC,QAAQH,QAAQE,SAAR,CAAR,CAAJ,CAAP;AACA;;AAEM,SAASE,cAAT,CAAwBC,KAAxB,EAA8BC,KAA9B,EAAoC;AAC1C,MAAIC,MAAMF,MAAME,GAAN,CAAUC,QAAV,EAAV;AACA,MAAIC,OAAO,qBAAUJ,MAAMI,IAAN,CAAWD,QAAX,GAAsBE,KAAtB,CAA4B,GAA5B,EAAiCC,GAAjC,EAAV,CAAX;AACA,MAAIC,KAAKZ,QAAQO,GAAR,EAAaE,OAAK,GAAL,GAASH,KAAtB,CAAT;AACA,MAAG,CAACM,EAAJ,EAAQA,KAAKZ,QAAQO,GAAR,EAAaE,OAAK,GAAlB,CAAL;AACR,SAAOG,KAAKA,EAAL,GAAU,IAAjB;AACA;;AAEM,SAASC,KAAT,CAAeD,EAAf,EAAkBE,CAAlB,EAAqB;AAC3B,SAAOF,GAAGC,KAAH,CAAS,IAAT,EAAcC,EAAEC,IAAF,GAASD,EAAEC,IAAF,EAAT,GAAoBD,CAAlC,CAAP;AACA","sourcesContent":["import { camelCase } from \"./util\";\r\n\r\nimport { map } from \"./map\";\r\n\r\nconst modules = {\r\n\t\"http://www.w3.org/2005/xpath-functions\":\"./function\"\r\n};\r\n\r\nexport function loadModule(moduleUri) {\r\n\t// conflict?\r\n\t//if (module.uri in modules) return;\r\n\t// let js manager handle logic\r\n\treturn map(require(modules[moduleUri]));\r\n}\r\n\r\nexport function functionLookup(qname,arity){\r\n\tvar uri = qname.uri.toString();\r\n\tvar name = camelCase(qname.name.toString().split(/:/).pop());\r\n\tvar fn = modules[uri][name+\"$\"+arity];\r\n\tif(!fn) fn = modules[uri][name+\"$\"];\r\n\treturn fn ? fn : null;\r\n}\r\n\r\nexport function apply(fn,a) {\r\n\treturn fn.apply(this,a.toJS ? a.toJS() : a);\r\n}\r\n"],"file":"function.js"}